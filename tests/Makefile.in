# $Header: /Users/kamil/work/gasnet-cvs2/gasnet/tests/Makefile.in,v 1.6 2003/07/10 23:58:08 phargrov Exp $
# Description: Makefile for GASNet tests
# Copyright 2002, Dan Bonachea <bonachea@cs.berkeley.edu>
# Terms of use are as specified in license.txt

all:
	@echo This Makefile is not intended to be called directly
	@echo do a "make tests-seq" or "make tests-par" within the core directory

include $(configfile)

testprograms =      \
	testam      \
        testbarrier \
	testcore1   \
	testexit    \
        testgasnet  \
        testhsl     \
        testlarge   \
        testlogGP   \
	testmisc    \
        testsmall   \
	testtools

tests: $(testprograms)
	
clean:
	rm -f $(testprograms)

distclean: 
	rm -f Makefile

# testtools is a special minimal case for an app that just uses GASNet tools
testtools: force
	@CC@ $(GASNET_INCLUDES) @GASNET_THREAD_DEFINES@ -DHAVE_PTHREAD_H -c -o $@.o $(srcdir)/$@.c
	@CC@ -o $@ $@.o @GASNET_THREAD_LIBS@ @LIBS@ @LIBM@

# This is a model for how GASNet clients should be built:
test% : force
	$(GASNET_CC) -I$(srcdir) $(GASNET_CPPFLAGS) $(GASNET_CFLAGS) -c -o $@.o $(srcdir)/$@.c
	$(GASNET_LD) $(GASNET_LDFLAGS) -o $@ $@.o $(GASNET_LIBS)

force:
	

.PHONY: force all

